{% extends "layout.html" %}
{% block content %}

	 <script type="text/javascript">

	    function DeviceOn(onformid){

	    	console.log("pressed with ",onformid);

	    	document.getElementById(onformid).submit();
	    }

    </script>
    

    <div class = "device-container">
	    <div class="border-bottom mb-2">
	    	<h2 class="pt-3">Here are your devices </h2>
	    </div>


	    {% for device in devices %}
			<div class="bg-white mt-2 p-2 rounded-top">	
				<h3 > {{ device.nice_name }} </h3>       
				<div class="row">
					<div class="col-sm-10">
						<p class="text-body"> located at {{ device.location}} </p>					
					</div>					
					<form method="POST" action="{{ url_for('device_action', deviceId=device.id, action='toggleOn') }}" class="col-sm-2" id="device_{{device.id}}_on_form">			
						<div class="form-check">				
							<input  class="my-on-toggle" data-toggle="toggle" type="checkbox" 
								data-onstyle="success" data-offstyle="info"	onchange="DeviceOn('device_{{device.id}}_on_form')" {% if device.is_on %} checked  {% endif %} 
								{% if not device.enabled %} disabled {% endif %}>
						</div>				                
					</form>


				</div>
			</div>    
		{% endfor %}
    	
    </div>


    <!-- <input type="checkbox" onclick="DeviceOn('aaas')">HERE -->

   

{% endblock %}

